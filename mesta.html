<!DOCTYPE html>
<html>
  <head>
    <title>Выбор места в кинотеатре</title>
    <link rel="stylesheet" href="style_mesta.css">
  </head>
  <body>
    <div class="container">
      <h1>Выберите места в кинотеатре</h1>
      <div class="screen">Экран</div>
      <div class="seats">
        <div class="row">
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
        </div>
        <div class="row">
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
        </div>
        <div class="row">
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
        </div>
        <div class="row">
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
        </div>
        <div class="row">
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat" ></div>
          <div class="seat"></div>
          <div class="seat"></div>

          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
          <div class="seat"></div>
        </div>
      </div>


      
      <div class="availability">
        <p>Доступность мест:</p>
        <span class="available"></span><span>Свободно</span>
        <span class="occupied"></
            span><span>Занято</span>
      </div>
    </div>
    <script>
      const seats = document.querySelectorAll('.row .seat:not(.occupied)');
      const count = document.getElementById('count');
      const total = document.getElementById('total');
      const movieSelect = document.getElementById('movie');

      let ticketPrice = +movieSelect.value;

      function updateSelectedCount() {
        const selectedSeats = document.querySelectorAll('.row .seat.selected');

        const seatsIndex = [...selectedSeats].map((seat) => [...seats].indexOf(seat));

        localStorage.setItem('selectedSeats', JSON.stringify(seatsIndex));

        const selectedSeatsCount = selectedSeats.length;

        count.innerText = selectedSeatsCount;
        total.innerText = selectedSeatsCount * ticketPrice;
      }

      movieSelect.addEventListener('change', (e) => {
        ticketPrice = +e.target.value;
        updateSelectedCount();
      });

      seats.forEach((seat) => {
        seat.addEventListener('click', () => {
          seat.classList.toggle('selected');

          updateSelectedCount();
        });
      });
    </script>
  </body>
</html>